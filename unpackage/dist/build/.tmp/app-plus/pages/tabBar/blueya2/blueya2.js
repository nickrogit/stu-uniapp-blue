(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabBar/blueya2/blueya2"],{"0437":function(t,e,a){"use strict";a.r(e);var o=a("48ba"),n=a("0ebe");for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);a("7850");var r=a("2877"),s=Object(r["a"])(n["default"],o["a"],o["b"],!1,null,"270b7f8c",null);e["default"]=s.exports},"0ebe":function(t,e,a){"use strict";a.r(e);var o=a("e84d"),n=a.n(o);for(var i in o)"default"!==i&&function(t){a.d(e,t,function(){return o[t]})}(i);e["default"]=n.a},"48ba":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},n=[];a.d(e,"a",function(){return o}),a.d(e,"b",function(){return n})},7850:function(t,e,a){"use strict";var o=a("c364"),n=a.n(o);n.a},c364:function(t,e,a){},e84d:function(t,e,a){"use strict";(function(t){var a,o,n,i,r,s,l,u;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var d={data:function(){return{bArray:[],no_match_list:[],match_list:[],send_data_onoff:!1,send_data_list:""}},onShow:function(){a=plus.android.runtimeMainActivity(),o=plus.android.importClass("android.content.Context"),a.getSystemService(o.BLUETOOTH_SERVICE),n=plus.android.importClass("android.bluetooth.BluetoothAdapter"),i=n.getDefaultAdapter(),r=plus.android.importClass("android.bluetooth.BluetoothDevice"),s=plus.android.importClass("android.content.IntentFilter")},methods:{print:function(e){console.log(e," at pages\\tabBar\\blueya2\\blueya2.vue:88");var a=this;t.showModal({title:"提示",content:"是连接此蓝牙？",success:function(o){o.confirm&&(console.log("用户点击确定"," at pages\\tabBar\\blueya2\\blueya2.vue:95"),t.showLoading({title:"蓝牙连接中..."}),a.print_bluetooth(e))}})},print_bluetooth:function(e){var a=this;t.hideLoading();var o=plus.android.importClass("java.util.UUID"),n=o.fromString("00001101-0000-1000-8000-00805F9B34FB");u=i.getRemoteDevice(e),plus.android.importClass(u),l=u.createInsecureRfcommSocketToServiceRecord(n),plus.android.importClass(l),l.isConnected()||(console.log("检测到设备未连接，尝试连接...."," at pages\\tabBar\\blueya2\\blueya2.vue:116"),l.connect()),console.log("设备已连接"," at pages\\tabBar\\blueya2\\blueya2.vue:119"),a.send_data_onoff=!0},send_data:function(){var t=this;if(console.log(" at pages\\tabBar\\blueya2\\blueya2.vue:127"),l.isConnected()){console.log(22222," at pages\\tabBar\\blueya2\\blueya2.vue:129");var e=l.getOutputStream();plus.android.importClass(e);var a=t.send_data_list,o=plus.android.invoke(a,"getBytes","gbk");e.write(o)}},open_bluetooth:function(){i.isEnabled()||(i.enable(),t.showToast({title:"蓝牙已启动",duration:2e3}))},close_bluetooth:function(){var e=this;e.no_match_list=[],e.match_list=[],i.isEnabled()&&(i.disable(),t.showToast({title:"蓝牙已关闭",duration:2e3}))},bluetooth_list:function(){var t=this;t.match_list=[];var e=i.getBondedDevices();plus.android.importClass(e);var a=e.iterator();plus.android.importClass(a);while(a.hasNext()){var o=a.next();plus.android.importClass(o);var n={name:o.getName(),SN:o.getAddress()};t.match_list.push(n)}},search_bluetooth:function(e){var a=this;i.isEnabled()?void 0!=e.length?t.showModal({title:"提示",content:"是否配对此蓝牙？",success:function(o){o.confirm&&(console.log("用户点击确定"," at pages\\tabBar\\blueya2\\blueya2.vue:200"),t.showLoading({title:"蓝牙匹配中..."}),a.search_pipei(e))}}):(t.showLoading({title:"蓝牙搜索中..."}),a.search_pipei()):t.showToast({title:"请先打开蓝牙",duration:3e3})},search_pipei:function(e){var o=this;o.bluetooth_list(),o.bArray=[],o.no_match_list=[];var n=new s,l=new r;i.startDiscovery();var u=plus.android.implements("io.dcloud.android.content.BroadcastReceiver",{onReceive:function(n,i){try{if(plus.android.importClass(i),"android.bluetooth.adapter.action.DISCOVERY_FINISHED"==i.getAction())t.hideLoading(),a.unregisterReceiver(u);else{if(l=i.getParcelableExtra(r.EXTRA_DEVICE),e==l.getAddress()&&l.createBond()&&(console.log("配对成功"," at pages\\tabBar\\blueya2\\blueya2.vue:240"),t.hideLoading()),null==l)return a.unregisterReceiver(u),t.hideLoading(),void o.bluetooth_list();var s=l.getAddress()+l.getName();if(-1==o.bArray.indexOf(s)){o.bArray.push(s);var d={name:l.getName(),SN:l.getAddress()};o.no_match_list.push(d),console.log(JSON.stringify(o.no_match_list)," at pages\\tabBar\\blueya2\\blueya2.vue:260")}}}catch(c){console.error(c," at pages\\tabBar\\blueya2\\blueya2.vue:265")}}});n.addAction(l.ACTION_FOUND),n.addAction(i.ACTION_DISCOVERY_STARTED),n.addAction(i.ACTION_DISCOVERY_FINISHED),n.addAction(i.ACTION_STATE_CHANGED),a.registerReceiver(u,n)}}};e.default=d}).call(this,a("6e42")["default"])}},[["6c31","common/runtime","common/vendor"]]]);