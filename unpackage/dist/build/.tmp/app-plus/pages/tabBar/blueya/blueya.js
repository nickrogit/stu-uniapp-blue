(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabBar/blueya/blueya"],{"15c0":function(t,e,a){"use strict";a.r(e);var o=a("4784"),n=a("870a");for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);a("f2c8");var s=a("2877"),l=Object(s["a"])(n["default"],o["a"],o["b"],!1,null,null,null);e["default"]=l.exports},4784:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},n=[];a.d(e,"a",function(){return o}),a.d(e,"b",function(){return n})},"870a":function(t,e,a){"use strict";a.r(e);var o=a("c1a2"),n=a.n(o);for(var i in o)"default"!==i&&function(t){a.d(e,t,function(){return o[t]})}(i);e["default"]=n.a},bffa:function(t,e,a){},c1a2:function(t,e,a){"use strict";(function(t){var a,o,n,i,s,l,r,u;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var d={data:function(){return{bArray:[],no_match_list:[],match_list:[],send_data_onoff:!0,send_data_list:"hello hello print"}},onShow:function(){a=plus.android.runtimeMainActivity(),o=plus.android.importClass("android.content.Context"),a.getSystemService(o.BLUETOOTH_SERVICE),n=plus.android.importClass("android.bluetooth.BluetoothAdapter"),i=n.getDefaultAdapter(),s=plus.android.importClass("android.bluetooth.BluetoothDevice"),l=plus.android.importClass("android.content.IntentFilter")},methods:{print:function(e){console.log(e," at pages/tabBar/blueya/blueya.vue:87");var a=this;t.showLoading({title:"蓝牙连接中..."}),a.print_bluetooth(e)},print_bluetooth:function(e){var a=this;t.hideLoading();var o=plus.android.importClass("java.util.UUID"),n=o.fromString("00001101-0000-1000-8000-00805F9B34FB");u=i.getRemoteDevice(e),plus.android.importClass(u),r=u.createRfcommSocketToServiceRecord(n),plus.android.importClass(r);var s=r.isConnected();if(console.log("islink:"," at pages/tabBar/blueya/blueya.vue:122"),console.log(s," at pages/tabBar/blueya/blueya.vue:123"),t.showToast({title:"准备连接",duration:2e3}),!r.isConnected()){t.showToast({title:"检测到设备未连接，尝试连接....",duration:2e3}),console.log("检测到设备未连接，尝试连接...."," at pages/tabBar/blueya/blueya.vue:133");try{r.connect()}catch(l){return t.showToast({title:"准备出错",duration:2e3}),void console.log("连接出错"," at pages/tabBar/blueya/blueya.vue:141")}}t.showToast({title:"连接成功",duration:2e3}),console.log("设备已连接"," at pages/tabBar/blueya/blueya.vue:149"),a.send_data_onoff=!0},send_data:function(){var e=this;if(console.log(" at pages/tabBar/blueya/blueya.vue:157"),r.isConnected()){t.showToast({title:"已连接，打印",duration:2e3}),console.log("已连接，打印"," at pages/tabBar/blueya/blueya.vue:163");var a=r.getOutputStream();plus.android.importClass(a);var o=e.send_data_list,n=plus.android.invoke(o,"getBytes","uft-8");a.write(n),a.flush(),u=null,r.close()}else t.showToast({title:"未连接，不打印",duration:2e3}),console.log("未连接"," at pages/tabBar/blueya/blueya.vue:177")},open_bluetooth:function(){i.isEnabled()||(i.enable(),t.showToast({title:"蓝牙已启动",duration:2e3}))},close_bluetooth:function(){var e=this;e.no_match_list=[],e.match_list=[],i.isEnabled()&&(i.disable(),t.showToast({title:"蓝牙已关闭",duration:2e3}))},bluetooth_list:function(){var e=this;e.match_list=[];var a=i.getBondedDevices();plus.android.importClass(a);var o=a.iterator();plus.android.importClass(o);while(o.hasNext()){var n=o.next();plus.android.importClass(n);var s={name:n.getName(),SN:n.getAddress()};e.match_list.push(s),t.hideLoading()}},search_bluetooth:function(e){var a=this;i.isEnabled()?void 0!=e.length?t.showModal({title:"提示",content:"是否配对此蓝牙？",success:function(o){o.confirm&&(console.log("用户点击确定"," at pages/tabBar/blueya/blueya.vue:241"),t.showLoading({title:"蓝牙匹配中..."}),a.search_pipei(e))}}):(t.showLoading({title:"蓝牙搜索中..."}),a.search_pipei()):t.showToast({title:"请先打开蓝牙",duration:3e3})},search_pipei:function(e){var o=this;o.bluetooth_list(),o.bArray=[],o.no_match_list=[];var n=new l,r=new s;i.startDiscovery();var u=plus.android.implements("io.dcloud.android.content.BroadcastReceiver",{onReceive:function(n,i){try{if(plus.android.importClass(i),"android.bluetooth.adapter.action.DISCOVERY_FINISHED"==i.getAction())t.hideLoading(),a.unregisterReceiver(u);else{if(r=i.getParcelableExtra(s.EXTRA_DEVICE),e==r.getAddress()&&r.createBond()&&(console.log("配对成功"," at pages/tabBar/blueya/blueya.vue:282"),t.showToast({title:"配对成功",duration:2e3}),t.hideLoading()),null==r)return a.unregisterReceiver(u),t.hideLoading(),void o.bluetooth_list();var l=r.getAddress()+r.getName();if(-1==o.bArray.indexOf(l)){o.bArray.push(l);var d={name:r.getName(),SN:r.getAddress()};o.no_match_list.push(d),console.log(JSON.stringify(o.no_match_list)," at pages/tabBar/blueya/blueya.vue:305")}}}catch(c){console.error(c," at pages/tabBar/blueya/blueya.vue:310")}}});n.addAction(r.ACTION_FOUND),n.addAction(i.ACTION_DISCOVERY_STARTED),n.addAction(i.ACTION_DISCOVERY_FINISHED),n.addAction(i.ACTION_STATE_CHANGED),a.registerReceiver(u,n)}}};e.default=d}).call(this,a("6e42")["default"])},f2c8:function(t,e,a){"use strict";var o=a("bffa"),n=a.n(o);n.a}},[["3ec8","common/runtime","common/vendor"]]]);